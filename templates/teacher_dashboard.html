{% extends 'base.html' %}

{% block title %}Teacher Dashboard - Attendance Management System{% endblock %}

{% block content %}
<style>
    /* Dashboard content styling */
    h1, h2 {
        color: #333;
        text-align: center;
    }

    ul {
        list-style-type: none;
        padding: 0;
    }

    li {
        margin-bottom: 20px;
    }

    form {
        text-align: center;
    }

    button {
        background-color: #4CAF50;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    button:hover {
        background-color: #45a049;
    }

    p {
        color: #666;
        text-align: center;
    }

    table {
        width: 80%;
        margin: 20px auto;
        border-collapse: collapse;
    }

    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }

    th {
        background-color: #f2f2f2;
    }

    tr:nth-child(even) {
        background-color: #f2f2f2;
    }

    tr:hover {
        background-color: #ddd;
    }
</style>

<h1>Welcome, {{ teacher.user.username }}</h1>
<h2>Faculties:</h2>
<br>
{% if faculties %}
    <ul>
        {% for faculty in faculties %}
            <li>
                <form action="{% url 'faculty_subjects' faculty.id %}" method="get">
                    <button type="submit">View Subjects for {{ faculty.name }}</button>
                </form>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>No faculties associated with this teacher.</p>
{% endif %}

{% if attendance_report %}
    <h2>Attendance Report:</h2>
    <table>
        <thead>
            <tr>
                <th>Subject</th>
                <th>Total Attendance</th>
            </tr>
        </thead>
        <tbody>
            {% for subject in attendance_report %}
                <tr>
                    <td>{{ subject.subject_name }}</td>
                    <td>{{ subject.total_attendance }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No attendance data available.</p>
{% endif %}

{% if present_students %}
    <h2>Present Students:</h2>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Roll Number</th>
            </tr>
        </thead>
        <tbody>
            {% for student in present_students %}
                <tr>
                    <td>{{ student.name }}</td>
                    <td>{{ student.roll_no }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No present students.</p>
{% endif %}

{% if absent_students %}
    <h2>Absent Students:</h2>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Roll Number</th>
            </tr>
        </thead>
        <tbody>
            {% for student in absent_students %}
                <tr>
                    <td>{{ student.name }}</td>
                    <td>{{ student.roll_no }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No absent students.</p>
{% endif %}
{% endblock %}
